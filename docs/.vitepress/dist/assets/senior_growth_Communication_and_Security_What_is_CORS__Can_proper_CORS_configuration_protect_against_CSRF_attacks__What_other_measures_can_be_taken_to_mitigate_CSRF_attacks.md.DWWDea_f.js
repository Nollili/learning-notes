import{_ as e,c as i,o as t,af as a}from"./chunks/framework.C3eVOF8n.js";const g=JSON.parse('{"title":"üåê CORS and CSRF ‚Äî Understanding the Difference and Mitigation","description":"","frontmatter":{},"headers":[],"relativePath":"senior_growth/Communication_and_Security/What_is_CORS__Can_proper_CORS_configuration_protect_against_CSRF_attacks__What_other_measures_can_be_taken_to_mitigate_CSRF_attacks.md","filePath":"senior_growth/Communication_and_Security/What_is_CORS__Can_proper_CORS_configuration_protect_against_CSRF_attacks__What_other_measures_can_be_taken_to_mitigate_CSRF_attacks.md"}'),r={name:"senior_growth/Communication_and_Security/What_is_CORS__Can_proper_CORS_configuration_protect_against_CSRF_attacks__What_other_measures_can_be_taken_to_mitigate_CSRF_attacks.md"};function n(o,s,l,h,d,c){return t(),i("div",null,[...s[0]||(s[0]=[a(`<h1 id="üåê-cors-and-csrf-‚Äî-understanding-the-difference-and-mitigation" tabindex="-1">üåê CORS and CSRF ‚Äî Understanding the Difference and Mitigation <a class="header-anchor" href="#üåê-cors-and-csrf-‚Äî-understanding-the-difference-and-mitigation" aria-label="Permalink to ‚Äúüåê CORS and CSRF ‚Äî Understanding the Difference and Mitigation‚Äù">‚Äã</a></h1><hr><h2 id="_1Ô∏è‚É£-what-is-cors" tabindex="-1">1Ô∏è‚É£ What is CORS? <a class="header-anchor" href="#_1Ô∏è‚É£-what-is-cors" aria-label="Permalink to ‚Äú1Ô∏è‚É£ What is CORS?‚Äù">‚Äã</a></h2><p><strong>CORS (Cross-Origin Resource Sharing)</strong> is a <strong>browser security mechanism</strong> that controls how resources on a web server can be requested from a different domain (origin).</p><ul><li><strong>Origin:</strong> combination of protocol + domain + port (e.g., <code>https://example.com:443</code>)</li><li>By default, <strong>browsers block cross-origin requests</strong> unless the server explicitly allows them.</li></ul><h3 id="how-it-works" tabindex="-1">How it works: <a class="header-anchor" href="#how-it-works" aria-label="Permalink to ‚ÄúHow it works:‚Äù">‚Äã</a></h3><ol><li>Browser sends a <strong>request with <code>Origin</code> header</strong>.</li><li>Server responds with <strong><code>Access-Control-Allow-Origin</code></strong> header to allow or deny the request.</li><li>For sensitive requests (methods other than GET/HEAD or with custom headers), browser performs a <strong>preflight OPTIONS request</strong>.</li></ol><p><strong>Example:</strong></p><div class="language-http"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://frontend.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OK</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Access-Control-Allow-Origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://frontend.com</span></span></code></pre></div><p><strong>Key Headers:</strong></p><ul><li><code>Access-Control-Allow-Origin</code> ‚Üí which origins are allowed</li><li><code>Access-Control-Allow-Methods</code> ‚Üí allowed HTTP methods</li><li><code>Access-Control-Allow-Headers</code> ‚Üí allowed custom headers</li><li><code>Access-Control-Allow-Credentials</code> ‚Üí allows cookies/auth headers to be sent</li></ul><hr><h2 id="_2Ô∏è‚É£-can-cors-protect-against-csrf" tabindex="-1">2Ô∏è‚É£ Can CORS Protect Against CSRF? <a class="header-anchor" href="#_2Ô∏è‚É£-can-cors-protect-against-csrf" aria-label="Permalink to ‚Äú2Ô∏è‚É£ Can CORS Protect Against CSRF?‚Äù">‚Äã</a></h2><p><strong>No, not fully.</strong></p><ul><li><p><strong>CSRF (Cross-Site Request Forgery)</strong> occurs when a malicious website tricks a user‚Äôs browser into making <strong>authenticated requests</strong> to your site (e.g., using cookies or browser sessions).</p></li><li><p>CORS <strong>does not prevent CSRF by itself</strong>, because:</p><ul><li>Browsers <strong>automatically send cookies</strong> with same-origin requests or requests to domains allowed by CORS with <code>credentials</code>.</li><li>If <code>Access-Control-Allow-Origin: *</code> is used, CORS does nothing for CSRF.</li></ul></li></ul><p><strong>Takeaway:</strong> CORS is primarily about <strong>cross-origin data sharing</strong>, not about preventing CSRF.</p><hr><h2 id="_3Ô∏è‚É£-measures-to-mitigate-csrf" tabindex="-1">3Ô∏è‚É£ Measures to Mitigate CSRF <a class="header-anchor" href="#_3Ô∏è‚É£-measures-to-mitigate-csrf" aria-label="Permalink to ‚Äú3Ô∏è‚É£ Measures to Mitigate CSRF‚Äù">‚Äã</a></h2><h3 id="a-use-samesite-cookies" tabindex="-1">a) <strong>Use SameSite Cookies</strong> <a class="header-anchor" href="#a-use-samesite-cookies" aria-label="Permalink to ‚Äúa) Use SameSite Cookies‚Äù">‚Äã</a></h3><ul><li>Set session/auth cookies with <strong><code>SameSite=Strict</code></strong> or <strong><code>Lax</code></strong>.</li></ul><div class="language-http"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Set-Cookie</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sessionId=abc123; HttpOnly; Secure; SameSite=Strict</span></span></code></pre></div><ul><li><code>Strict</code> ‚Üí cookie never sent cross-origin.</li><li><code>Lax</code> ‚Üí cookie sent only for safe top-level navigation.</li></ul><h3 id="b-csrf-tokens" tabindex="-1">b) <strong>CSRF Tokens</strong> <a class="header-anchor" href="#b-csrf-tokens" aria-label="Permalink to ‚Äúb) CSRF Tokens‚Äù">‚Äã</a></h3><ul><li>Server generates a unique token for each session/form.</li><li>Token is sent with requests (usually in headers or hidden form fields).</li><li>Server validates token before processing request.</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/transfer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;X-CSRF-Token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: csrfToken },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    body: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ amount: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="c-double-submit-cookies" tabindex="-1">c) <strong>Double Submit Cookies</strong> <a class="header-anchor" href="#c-double-submit-cookies" aria-label="Permalink to ‚Äúc) Double Submit Cookies‚Äù">‚Äã</a></h3><ul><li>Store token in <strong>cookie</strong> and <strong>request header</strong>.</li><li>Server verifies both match.</li></ul><h3 id="d-check-origin-and-referer-headers" tabindex="-1">d) <strong>Check Origin and Referer Headers</strong> <a class="header-anchor" href="#d-check-origin-and-referer-headers" aria-label="Permalink to ‚Äúd) Check Origin and Referer Headers‚Äù">‚Äã</a></h3><ul><li>Validate <code>Origin</code> or <code>Referer</code> headers on <strong>state-changing requests</strong> (POST, PUT, DELETE).</li></ul><h3 id="e-use-samesite-anti-csrf-tokens" tabindex="-1">e) <strong>Use SameSite + Anti-CSRF tokens</strong> <a class="header-anchor" href="#e-use-samesite-anti-csrf-tokens" aria-label="Permalink to ‚Äúe) Use SameSite + Anti-CSRF tokens‚Äù">‚Äã</a></h3><ul><li>Modern best practice combines <strong>SameSite cookies</strong> with <strong>CSRF tokens</strong>.</li></ul><hr><h2 id="_4Ô∏è‚É£-summary-table" tabindex="-1">4Ô∏è‚É£ Summary Table <a class="header-anchor" href="#_4Ô∏è‚É£-summary-table" aria-label="Permalink to ‚Äú4Ô∏è‚É£ Summary Table‚Äù">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Security Concept</th><th>Purpose</th><th>Protection Against</th><th>Notes</th></tr></thead><tbody><tr><td><strong>CORS</strong></td><td>Allow cross-origin requests</td><td>Not CSRF; controls which origins can read responses</td><td>Only affects browser‚Äôs read access</td></tr><tr><td><strong>SameSite Cookies</strong></td><td>Restrict cookies to same-origin</td><td>CSRF</td><td>Recommended for all session cookies</td></tr><tr><td><strong>CSRF Token</strong></td><td>Unique per session/form</td><td>CSRF</td><td>Server-side validation required</td></tr><tr><td><strong>Origin/Referer Check</strong></td><td>Validate request source</td><td>CSRF</td><td>Extra layer of defense</td></tr><tr><td><strong>Double Submit Cookie</strong></td><td>Token in header + cookie</td><td>CSRF</td><td>Useful if storing token in JS is safe</td></tr></tbody></table><hr><h3 id="‚úÖ-key-takeaways" tabindex="-1">‚úÖ Key Takeaways <a class="header-anchor" href="#‚úÖ-key-takeaways" aria-label="Permalink to ‚Äú‚úÖ Key Takeaways‚Äù">‚Äã</a></h3><ol><li><p><strong>CORS ‚â† CSRF protection</strong> ‚Äî it controls cross-origin <strong>read access</strong>, not whether cookies are sent.</p></li><li><p>To prevent CSRF:</p><ul><li>Use <strong>SameSite cookies</strong></li><li>Use <strong>anti-CSRF tokens</strong></li><li>Optionally validate <strong>Origin/Referer headers</strong></li></ul></li><li><p>Always combine multiple layers for robust protection in modern web apps.</p></li></ol>`,37)])])}const p=e(r,[["render",n]]);export{g as __pageData,p as default};
