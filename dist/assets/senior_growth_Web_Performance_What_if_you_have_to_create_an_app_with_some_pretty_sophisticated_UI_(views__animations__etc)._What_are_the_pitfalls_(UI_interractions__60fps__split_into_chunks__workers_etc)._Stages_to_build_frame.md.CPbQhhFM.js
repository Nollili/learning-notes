import{_ as t,c as i,o as a,af as r}from"./chunks/framework.C3eVOF8n.js";const g=JSON.parse('{"title":"What if you have to create an app with some pretty sophisticated UI (views, animations, etc). What are the pitfalls? (UI interractions, 60fps, split into chunks, workers etc). Stages to build frame?","description":"","frontmatter":{},"headers":[],"relativePath":"senior_growth/Web_Performance/What_if_you_have_to_create_an_app_with_some_pretty_sophisticated_UI_(views,_animations,_etc)._What_are_the_pitfalls_(UI_interractions,_60fps,_split_into_chunks,_workers_etc)._Stages_to_build_frame.md","filePath":"senior_growth/Web_Performance/What_if_you_have_to_create_an_app_with_some_pretty_sophisticated_UI_(views,_animations,_etc)._What_are_the_pitfalls_(UI_interractions,_60fps,_split_into_chunks,_workers_etc)._Stages_to_build_frame.md"}'),s={name:"senior_growth/Web_Performance/What_if_you_have_to_create_an_app_with_some_pretty_sophisticated_UI_(views,_animations,_etc)._What_are_the_pitfalls_(UI_interractions,_60fps,_split_into_chunks,_workers_etc)._Stages_to_build_frame.md"};function n(o,e,l,d,h,c){return a(),i("div",null,[...e[0]||(e[0]=[r(`<h1 id="what-if-you-have-to-create-an-app-with-some-pretty-sophisticated-ui-views-animations-etc-what-are-the-pitfalls-ui-interractions-60fps-split-into-chunks-workers-etc-stages-to-build-frame" tabindex="-1">What if you have to create an app with some pretty sophisticated UI (views, animations, etc). What are the pitfalls? (UI interractions, 60fps, split into chunks, workers etc). Stages to build frame? <a class="header-anchor" href="#what-if-you-have-to-create-an-app-with-some-pretty-sophisticated-ui-views-animations-etc-what-are-the-pitfalls-ui-interractions-60fps-split-into-chunks-workers-etc-stages-to-build-frame" aria-label="Permalink to ‚ÄúWhat if you have to create an app with some pretty sophisticated UI (views, animations, etc). What are the pitfalls? (UI interractions, 60fps, split into chunks, workers etc). Stages to build frame?‚Äù">‚Äã</a></h1><h2 id="building-sophisticated-ui-apps-‚Äî-performance-pitfalls-and-best-practices" tabindex="-1">Building Sophisticated UI Apps ‚Äî Performance Pitfalls and Best Practices <a class="header-anchor" href="#building-sophisticated-ui-apps-‚Äî-performance-pitfalls-and-best-practices" aria-label="Permalink to ‚ÄúBuilding Sophisticated UI Apps ‚Äî Performance Pitfalls and Best Practices‚Äù">‚Äã</a></h2><p>When building apps with advanced UI (views, animations, etc.), performance is a key concern.<br> The main goal: keep <strong>~60 FPS</strong> and <strong>&lt;16ms per frame</strong> for smooth UI.</p><hr><h2 id="üéØ-target-performance-budget" tabindex="-1">üéØ Target Performance Budget <a class="header-anchor" href="#üéØ-target-performance-budget" aria-label="Permalink to ‚ÄúüéØ Target Performance Budget‚Äù">‚Äã</a></h2><ul><li><strong>1 frame = 16.6ms</strong><ul><li>60 FPS = 1000ms / 60 = ~16.6ms per frame</li></ul></li><li>Browser must <strong>parse, compute styles, layout, paint, and composite</strong> everything in that window.</li></ul><hr><h2 id="üß©-the-rendering-pipeline-frame-lifecycle" tabindex="-1">üß© The Rendering Pipeline (Frame Lifecycle) <a class="header-anchor" href="#üß©-the-rendering-pipeline-frame-lifecycle" aria-label="Permalink to ‚Äúüß© The Rendering Pipeline (Frame Lifecycle)‚Äù">‚Äã</a></h2><p>When the browser renders a frame, it goes through these <strong>stages</strong>:</p><ol><li><strong>JavaScript</strong> ‚Äì Run event handlers, animation logic, rendering, etc.</li><li><strong>Style Calculation</strong> ‚Äì Compute CSS styles for elements.</li><li><strong>Layout (Reflow)</strong> ‚Äì Figure out element sizes and positions.</li><li><strong>Paint</strong> ‚Äì Fill pixels (colors, images, borders, text).</li><li><strong>Composite</strong> ‚Äì Combine painted layers into the final frame.</li></ol><p>If any step takes longer than <strong>16ms</strong>, you drop below 60 FPS ‚Üí visible <strong>jank</strong>.</p><hr><h2 id="‚ö†Ô∏è-common-performance-pitfalls-in-sophisticated-uis" tabindex="-1">‚ö†Ô∏è Common Performance Pitfalls in Sophisticated UIs <a class="header-anchor" href="#‚ö†Ô∏è-common-performance-pitfalls-in-sophisticated-uis" aria-label="Permalink to ‚Äú‚ö†Ô∏è Common Performance Pitfalls in Sophisticated UIs‚Äù">‚Äã</a></h2><h3 id="_1-heavy-javascript-on-the-main-thread" tabindex="-1">1. Heavy JavaScript on the Main Thread <a class="header-anchor" href="#_1-heavy-javascript-on-the-main-thread" aria-label="Permalink to ‚Äú1. Heavy JavaScript on the Main Thread‚Äù">‚Äã</a></h3><ul><li>Large bundle or complex UI logic blocks input responsiveness.</li><li>JS competes with rendering tasks (same thread).</li></ul><p><strong>Mitigations:</strong></p><ul><li>Use <strong>Web Workers</strong> for CPU-heavy tasks (e.g., data parsing, sorting).</li><li>Keep main thread free for UI rendering.</li><li>Use <strong>OffscreenCanvas</strong> for complex drawing.</li></ul><hr><h3 id="_2-layout-thrashing-frequent-reflows" tabindex="-1">2. Layout Thrashing (Frequent Reflows) <a class="header-anchor" href="#_2-layout-thrashing-frequent-reflows" aria-label="Permalink to ‚Äú2. Layout Thrashing (Frequent Reflows)‚Äù">‚Äã</a></h3><ul><li><p>Happens when JS reads and writes layout properties repeatedly:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.style.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.offsetWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// causes forced reflow</span></span></code></pre></div></li></ul><p><strong>Mitigations:</strong></p><ul><li>Batch DOM reads and writes (e.g., via <code>requestAnimationFrame</code>).</li><li>Avoid querying layout properties (<code>offsetWidth</code>, <code>scrollTop</code>) in loops.</li><li>Minimize deep DOM manipulations.</li></ul><hr><h3 id="_3-overdraw-and-expensive-paints" tabindex="-1">3. Overdraw and Expensive Paints <a class="header-anchor" href="#_3-overdraw-and-expensive-paints" aria-label="Permalink to ‚Äú3. Overdraw and Expensive Paints‚Äù">‚Äã</a></h3><ul><li>Too many overlapping layers or semi-transparent elements trigger costly painting.</li></ul><p><strong>Mitigations:</strong></p><ul><li>Simplify layers and use GPU compositing for transforms and opacity.</li><li>Use CSS transforms (<code>translate3d</code>, <code>scale3d</code>) instead of <code>top</code>/<code>left</code> for movement.</li></ul><hr><h3 id="_4-non-gpu-friendly-animations" tabindex="-1">4. Non-GPU-Friendly Animations <a class="header-anchor" href="#_4-non-gpu-friendly-animations" aria-label="Permalink to ‚Äú4. Non-GPU-Friendly Animations‚Äù">‚Äã</a></h3><ul><li>Animating layout-affecting properties (<code>width</code>, <code>top</code>, <code>height</code>, <code>margin</code>) triggers reflow and repaint.</li></ul><p><strong>Best practice:</strong><br> Animate only compositor-friendly properties: <code>transform</code>, <code>opacity</code></p><p>Use the <code>will-change</code> CSS hint:</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  will-change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: transform, opacity;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="_5-monolithic-rendering-logic" tabindex="-1">5. Monolithic Rendering Logic <a class="header-anchor" href="#_5-monolithic-rendering-logic" aria-label="Permalink to ‚Äú5. Monolithic Rendering Logic‚Äù">‚Äã</a></h3><ul><li>Large React components re-render on every state change.</li></ul><p><strong>Mitigations:</strong></p><ul><li>Split components logically; use <code>React.memo</code> and <code>useCallback</code>.</li><li>Use windowing libraries (e.g., <code>react-window</code>, <code>react-virtualized</code>) for large lists.</li><li>Defer non-critical rendering (lazy load sections).</li></ul><hr><h3 id="_6-heavy-data-processing-in-ui-thread" tabindex="-1">6. Heavy Data Processing in UI Thread <a class="header-anchor" href="#_6-heavy-data-processing-in-ui-thread" aria-label="Permalink to ‚Äú6. Heavy Data Processing in UI Thread‚Äù">‚Äã</a></h3><ul><li>Parsing JSON, filtering, sorting, or aggregating large data sets in main thread.</li></ul><p><strong>Mitigations:</strong></p><ul><li>Move to Web Workers or WebAssembly.</li><li>Stream data incrementally rather than loading all at once.</li></ul><hr><h3 id="_7-too-many-event-listeners-frequent-repaints" tabindex="-1">7. Too Many Event Listeners / Frequent Repaints <a class="header-anchor" href="#_7-too-many-event-listeners-frequent-repaints" aria-label="Permalink to ‚Äú7. Too Many Event Listeners / Frequent Repaints‚Äù">‚Äã</a></h3><ul><li>Scroll, mousemove, resize handlers firing excessively.</li></ul><p><strong>Mitigations:</strong></p><ul><li>Use debounce/throttle for high-frequency events.</li><li>Offload logic via <code>requestAnimationFrame</code>.</li></ul><hr><h2 id="üß±-optimized-build-architecture-for-heavy-ui-apps" tabindex="-1">üß± Optimized Build Architecture (for Heavy UI Apps) <a class="header-anchor" href="#üß±-optimized-build-architecture-for-heavy-ui-apps" aria-label="Permalink to ‚Äúüß± Optimized Build Architecture (for Heavy UI Apps)‚Äù">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Layer</th><th>Purpose</th><th>Optimization</th></tr></thead><tbody><tr><td>UI Components</td><td>React/Vue components for display</td><td>Split into microcomponents, memoize, windowing</td></tr><tr><td>Animation Layer</td><td>React Spring, Framer Motion, or CSS transforms</td><td>GPU-based transforms, requestAnimationFrame</td></tr><tr><td>Data/Logic Layer</td><td>Web Workers or Worker Threads</td><td>Offload heavy tasks</td></tr><tr><td>Rendering Engine</td><td>Canvas/WebGL for complex visuals</td><td>Use OffscreenCanvas, limit redraw regions</td></tr><tr><td>Bundling</td><td>Code splitting via Vite or Webpack</td><td>Load UI chunks on demand</td></tr></tbody></table><hr><h2 id="üß™-profiling-and-testing" tabindex="-1">üß™ Profiling and Testing <a class="header-anchor" href="#üß™-profiling-and-testing" aria-label="Permalink to ‚Äúüß™ Profiling and Testing‚Äù">‚Äã</a></h2><ul><li>Chrome DevTools ‚Üí Performance tab<br> Identify long tasks, FPS drops, and ‚ÄúLayout‚Äù spikes.</li><li>Rendering panel ‚Üí Show paint flashing, layer borders.</li><li>React Profiler ‚Üí Identify excessive re-renders.</li><li>Memory tab ‚Üí Detect leaks over time.</li></ul><hr><h2 id="üöÄ-strategies-to-keep-60-fps" tabindex="-1">üöÄ Strategies to Keep 60 FPS <a class="header-anchor" href="#üöÄ-strategies-to-keep-60-fps" aria-label="Permalink to ‚ÄúüöÄ Strategies to Keep 60 FPS‚Äù">‚Äã</a></h2><ul><li>Keep JS under 4ms per frame</li><li>Use GPU-accelerated animations</li><li>Avoid layout recalculations mid-frame</li><li>Defer heavy work (<code>requestIdleCallback</code>, Web Workers)</li><li>Virtualize large DOM collections</li><li>Use <code>IntersectionObserver</code> for lazy-rendering</li></ul><hr><h2 id="‚úÖ-summary" tabindex="-1">‚úÖ Summary <a class="header-anchor" href="#‚úÖ-summary" aria-label="Permalink to ‚Äú‚úÖ Summary‚Äù">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Area</th><th>Problem</th><th>Solution</th></tr></thead><tbody><tr><td>Main thread blocking</td><td>Too much JS or data processing</td><td>Offload to Web Workers</td></tr><tr><td>Rendering</td><td>Frequent layout/paint cycles</td><td>Animate only transform &amp; opacity</td></tr><tr><td>React re-renders</td><td>Large tree updates</td><td>Memoization, windowing</td></tr><tr><td>Initial load</td><td>Large bundle</td><td>Code splitting, lazy loading</td></tr><tr><td>Animation smoothness</td><td>Non-GPU props, jank</td><td>GPU transforms, 60 FPS budget</td></tr></tbody></table><hr><p><strong>üß† Rule of thumb:</strong><br> For every frame, the browser needs 16ms to do everything ‚Äî script, style, layout, paint, and composite.<br> The less you ask it to do per frame, the smoother and more responsive your UI will feel.</p>`,62)])])}const m=t(s,[["render",n]]);export{g as __pageData,m as default};
